"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();(function(){"use strict";var board=document.getElementById("game-board");var status=document.getElementById("status");var game={next:function next(){this.turn=++this.turn%2;this.player=this.turn?"O":"X"},isDraw:function isDraw(){return!this.done&&this.moves>8},isDone:function isDone(){return this.done},move:function move(r,c){if(this.done){return this.done}this.moves++;this.table[r][c]=this.turn;var win=true;for(var i=0,row=this.table[r];i<3;i++){if(row[i]!==this.turn){this.done=false;break}this.done=true}if(!this.done){for(var _i=0;_i<3;_i++){if(this.table[_i][c]!==this.turn){this.done=false;break}this.done=true}}if(!this.done&&(c===r&&c===1||(r===0||r===2)&&(c===0||c===2))){for(var _i2=0;_i2<3;_i2++){if(this.table[_i2][_i2]!==this.turn){this.done=false;break}this.done=true}if(!this.done){for(var _i3=0;_i3<3;_i3++){if(this.table[_i3][2-_i3]!==this.turn){this.done=false;break}this.done=true}}}return this.done},reset:function reset(){this.turn=0;this.moves=0;this.player="X";this.done=false;this.table=[];for(var i=0;i<3;i++){this.table.push(Array(3))}}};init();document.getElementById("reset").addEventListener("click",init);function init(){clearBoard();game.reset();refresh()}function clearBoard(){board.innerHTML="";for(var i=0;i<3;i++){var row=document.createElement("div");row.setAttribute("class","row");board.appendChild(row);for(var j=0;j<3;j++){var n=document.createElement("div");n.id=i+","+j;n.setAttribute("class","cell");row.appendChild(n);n.addEventListener("click",tictac,false)}}}function tictac(e){if(!e.target.innerHTML&&!game.isDone()){e.target.innerHTML='<span class="token">'+game.player+"</span>";var _e$target$id$split$ma=e.target.id.split(",").map(function(i){return Number(i)});var _e$target$id$split$ma2=_slicedToArray(_e$target$id$split$ma,2);var r=_e$target$id$split$ma2[0];var c=_e$target$id$split$ma2[1];if(!game.move(r,c)){game.next()}refresh()}}function refresh(){var message=game.isDone()?game.player+" wins!":game.isDraw()?"It's a draw!":game.player+"'s turn";status.innerHTML='<span class="status">'+message+"</span>"}})();